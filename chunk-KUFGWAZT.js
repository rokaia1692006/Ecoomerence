import{b as L,c as r,d as R,e as N,f as P,g,h as q,i as V,j as A,k as D,l as T,m as G,n as I}from"./chunk-INXNOXXO.js";import"./chunk-WXWXYMIB.js";import{u as C,v as _,z as k}from"./chunk-RMQVJLYB.js";import{$a as v,Ab as a,Cb as E,Eb as d,Ma as l,Wa as w,X as u,ba as f,ca as h,hb as s,kb as x,nb as i,ob as e,pb as n,sb as y,tb as F,ub as S}from"./chunk-AGOSMD2F.js";function $(p,m){if(p&1&&(i(0,"div",19),a(1),e(),i(2,"div",20)(3,"a",21),a(4," Login instead "),e()()),p&2){let t=S();l(),E(" ",t.apiError," ")}}var M=class p{loaderService=u(k);sucess=!1;apiError=null;router=u(C);authService=u(I);regForm=new P({name:new g("",[r.required,r.minLength(2),r.maxLength(20)]),email:new g("",[r.required,r.maxLength(50),r.email]),password:new g("",[r.required,r.minLength(8)]),rePassword:new g("",[r.required,r.minLength(8)]),phone:new g("",[r.required,r.pattern(/^01[0125][0-9]{8}$/)])},{validators:this.checkpass});checkpass(m){return m.get("password")?.value==m.get("rePassword")?.value?null:{mismatch:!0}}getValues(){if(this.loaderService.show(),this.regForm.valid){let m={name:this.regForm.get("name")?.value,email:this.regForm.get("email")?.value,password:this.regForm.get("password")?.value,rePassword:this.regForm.get("rePassword")?.value,phone:this.regForm.get("phone")?.value};this.authService.register(m).subscribe({next:t=>{console.log("wth",t),t.message=="success"&&(this.regForm.reset(),this.sucess=!0,this.router.navigate(["/login"]).then(()=>{this.loaderService.hide()}))},error:t=>{console.error("FAILED",t.error),this.apiError=t.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.regForm.errors),this.regForm.markAllAsTouched()}static \u0275fac=function(t){return new(t||p)};static \u0275cmp=w({type:p,selectors:[["app-register"]],decls:36,vars:9,consts:[[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","name","type","text","id","name","placeholder","Type Your name","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","name",3,"control"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","phone","type","phone","id","phone","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","phone",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","rePassword","type","password","id","Re_Password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","rePassword",3,"control","compare"],["type","submit",1,"disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:hover:bg-slate-800","disabled:focus:ring-0","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"disabled"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/login"]],template:function(t,o){if(t&1){let c=y();i(0,"form",0),F("ngSubmit",function(){return f(c),h(o.getValues())}),i(1,"h1",1),a(2,"Register"),e(),i(3,"div",2)(4,"label",3),a(5,"Name"),e(),n(6,"input",4),d(7),n(8,"app-errormsg",5),e(),i(9,"div",2)(10,"label",6),a(11,"Email"),e(),n(12,"input",7),d(13),n(14,"app-errormsg",8),e(),i(15,"div",2)(16,"label",9),a(17,"phone"),e(),n(18,"input",10),d(19),n(20,"app-errormsg",11),e(),i(21,"div",2)(22,"label",12),a(23,"Password"),e(),n(24,"input",13),d(25),n(26,"app-errormsg",14),e(),i(27,"div",2)(28,"label",15),a(29,"Re-Password"),e(),n(30,"input",16),d(31),n(32,"app-errormsg",17),e(),i(33,"button",18),a(34,"Submit"),e(),v(35,$,5,1),e()}if(t&2){s("formGroup",o.regForm),o.regForm.controls.name,l(8),s("control",o.regForm.controls.name);let c=o.regForm.controls.email;l(6),s("control",c);let b=o.regForm.controls.phone;l(6),s("control",b);let j=o.regForm.controls.password;l(6),s("control",j);let Y=o.regForm.controls.rePassword;l(6),s("control",Y)("compare",o.regForm),l(),s("disabled",o.regForm.invalid||o.sucess),l(2),x(o.apiError?35:-1)}},dependencies:[T,q,L,R,N,D,V,A,G,_],encapsulation:2})};export{M as RegisterComponent};
