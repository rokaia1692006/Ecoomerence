import{a as F,b as R}from"./chunk-CRNNH4GY.js";import{a as A}from"./chunk-6VVBVPFE.js";import{a as V,b as L}from"./chunk-P6KFG34U.js";import"./chunk-KMUZPL3V.js";import{o as D}from"./chunk-VNWZKHP3.js";import{a as z}from"./chunk-KQUAVRFU.js";import"./chunk-WXWXYMIB.js";import{a as E}from"./chunk-C73HAMVH.js";import{i as M,k as j}from"./chunk-6WQU6EZD.js";import{k as P,l as k,n as T}from"./chunk-ISIAGV3U.js";import{Ab as a,Ib as m,Jb as O,Kb as v,Oa as x,Ra as c,Wa as d,_ as I,ab as w,ea as p,fa as u,fb as g,nb as l,ob as y,tb as n,ub as r,vb as C,wb as b,xb as S,yb as h,zb as f}from"./chunk-7YWQNTIB.js";function Z(i,e){if(i&1){let t=h();n(0,"div",17)(1,"mat-icon",18),f("click",function(){p(t);let s=a(2);return u(s.isZoomed=!1)}),m(2,"close"),r(),C(3,"img",19),r()}if(i&2){let t=a(2);c(3),l("src",t.images[t.currentImage],x)}}function B(i,e){if(i&1&&C(0,"img",21),i&2){let t=a().$implicit,o=a(2);y("slide-in",o.slidingIn)("slide-out",o.slidingOut),l("src",t,x)}}function N(i,e){if(i&1&&(b(0),g(1,B,1,5,"img",20),S()),i&2){let t=e.index,o=a(2);c(),l("ngIf",t===o.currentImage)}}function U(i,e){if(i&1){let t=h();n(0,"img",24),f("click",function(){let s=p(t).index,_=a(3);return u(_.selectImage(s))}),r()}if(i&2){let t=e.$implicit;l("src",t,x)}}function G(i,e){if(i&1&&(n(0,"div",22),g(1,U,1,1,"img",23),r()),i&2){let t=a(2);c(),l("ngForOf",t.images)}}function $(i,e){if(i&1){let t=h();n(0,"section",1),g(1,Z,4,1,"div",2),n(2,"div",3)(3,"div",4),g(4,N,2,1,"ng-container",5),n(5,"mat-icon",6),f("click",function(){p(t);let s=a();return u(s.Zoomin(s.currentImage))}),m(6,"zoom_in"),r()(),n(7,"div",7),g(8,G,2,1,"div",8),n(9,"h1",9),m(10),r(),n(11,"h3",10),m(12),r(),n(13,"div",11)(14,"h3"),m(15),r(),n(16,"div",12)(17,"h3"),m(18),r(),n(19,"mat-icon",13),m(20,"star"),r()()(),n(21,"div",14)(22,"button",15),f("click",function(s){p(t);let _=a();return u(_.addToCart(_.product,s))}),m(23," Add + "),r(),n(24,"button",16),f("click",function(){p(t);let s=a();return u(s.toggleWishlist(s.product._id))}),n(25,"mat-icon"),m(26,"favorite"),r()()()()()()}if(i&2){let t=a();c(),l("ngIf",t.isZoomed),c(3),l("ngForOf",t.images),c(4),l("ngIf",t.images.length>0),c(2),v(" ",t.product.title," "),c(2),v(" ",t.product.description," "),c(3),v("",t.product.price," EGP"),c(3),O(t.product.ratingsAverage)}}var W=class i{constructor(e,t,o,s,_,q,H){this.route=e;this.productService=t;this.wishlist=o;this.auth=s;this.router=_;this.snackBar=q;this.cartlogic=H;this.productId=this.route.snapshot.paramMap.get("id")}productId;product;images=[];currentImage=0;Loading=!0;slidingIn=!1;isZoomed=!1;slidingOut=!1;adding=!1;loader=I(E);ngOnInit(){this.route.paramMap.subscribe(e=>{let t=e.get("id");t&&(this.productId=t,this.loadProduct(t))})}Zoomin(e){this.isZoomed=!0}selectImage(e){e!==this.currentImage&&(this.slidingIn=!1,this.slidingOut=!0,setTimeout(()=>{this.currentImage=e,this.slidingOut=!1,this.slidingIn=!0,setTimeout(()=>{this.slidingIn=!1},500)},500))}newImage(){this.slidingIn=!1,this.slidingOut=!0,setTimeout(()=>{this.currentImage++,this.currentImage>=this.images.length&&(this.currentImage=0),this.slidingOut=!1,this.slidingIn=!0,setTimeout(()=>{this.slidingIn=!1},500)},500)}loadProduct(e){this.loader.show(),this.productService.getProductId(e).subscribe({next:t=>{this.Loading=!0,this.product=t.data,this.images=this.product.images,this.Loading=!1,this.currentImage=0,this.loader.hide()},error:()=>{window.alert("COULDNT LOAD PAGE"),this.loader.hide()}})}addToCart(e,t){t.stopPropagation(),this.cartlogic.addToCart(e)}toggleWishlist(e){if(!this.auth.isLoggedIn()){this.router.navigate(["/login"]);return}this.wishlist.addToWishlist(e).subscribe({next:()=>this.showToast("Added to wishlist!","favorite"),error:()=>{this.wishlist.removeFromWishlist(e).subscribe({next:()=>this.showToast("Removed from wishlist","favorite_border"),error:()=>this.showToast("Failed to update wishlist","error")})}})}showToast(e,t="check_circle"){this.snackBar.openFromComponent(L,{data:{message:e,icon:t},duration:3e3,horizontalPosition:"right",verticalPosition:"top",panelClass:["custom-snackbar"]})}static \u0275fac=function(t){return new(t||i)(d(M),d(R),d(A),d(z),d(j),d(V),d(F))};static \u0275cmp=w({type:i,selectors:[["app-details"]],decls:1,vars:1,consts:[["class","m-1",4,"ngIf"],[1,"m-1"],["class","zoomed  fixed inset-0 flex justify-center items-center",4,"ngIf"],[1,"details","flex","flex-col","lg:flex-row","lg:justify-center","lg:items-center","gap-8","mt-5"],[1,"imgcont","flex","justify-center","text-center","relative"],[4,"ngFor","ngForOf"],[1,"zoom","absolute","top-4","right-32","lg:right-3","cursor-pointer","text-lg",3,"click"],[1,"alldis","max-w-lg","flex","flex-col","flex-wrap","gap-8","justify-center","self-center","text-left"],["class","flex flex-wrap gap-2 justify-center items-center mb-5 mt-5",4,"ngIf"],[1,"title"],[1,"text-wrap","lg:mr-5"],[1,"flex","flex-row","gap-5"],[1,"flex","flex-row","ml-auto","flex-end"],[1,"text-yellow-300","star"],[1,"flex","flex-row","justify-center","items-center","gap-3"],[1,"bt","justify-center","text-center","align-middle","items-center","p-5",3,"click"],[3,"click"],[1,"zoomed","fixed","inset-0","flex","justify-center","items-center"],[1,"text-lg","absolute","top-2","right-3","cursor-pointer",3,"click"],[1,"max-h-full","max-w-full","object-contain",3,"src"],["class"," w-full Image align-middle items-center mt-5 lg:mr-5",3,"src","slide-in","slide-out",4,"ngIf"],[1,"w-full","Image","align-middle","items-center","mt-5","lg:mr-5",3,"src"],[1,"flex","flex-wrap","gap-2","justify-center","items-center","mb-5","mt-5"],["class","tinyimages w-16 h-16 object-cover cursor-pointer border-2 border-gray-400 rounded",3,"src","click",4,"ngFor","ngForOf"],[1,"tinyimages","w-16","h-16","object-cover","cursor-pointer","border-2","border-gray-400","rounded",3,"click","src"]],template:function(t,o){t&1&&g(0,$,27,7,"section",0),t&2&&l("ngIf",!o.Loading)},dependencies:[D,k,P,T],styles:[".star[_ngcontent-%COMP%]{color:#daa520}.title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.category[_ngcontent-%COMP%]{color:var(--main-color);margin-bottom:10px}.bt[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;background-color:#0aad0a;border-radius:10px;width:150px;padding:10px 20px}.imgcont[_ngcontent-%COMP%]{overflow:hidden}.image[_ngcontent-%COMP%]{object-fit:cover;will-change:transform,opacity;display:block}.image.slide-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOut .5s ease-in-out forwards}.image.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .5s ease-in-out forwards}@keyframes _ngcontent-%COMP%_slideOut{0%{transform:translate(0);opacity:1}to{transform:translate(-100%);opacity:0}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.zoom[_ngcontent-%COMP%]{color:#0aad0a;font-size:30px}.zoomed[_ngcontent-%COMP%]{background-color:#f5f5f5;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000;display:flex;justify-content:center;align-items:center;overflow:auto}.Image[_ngcontent-%COMP%]{object-fit:contain;max-height:400px}"]})};export{W as DetailsComponent};
