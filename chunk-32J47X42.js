import{a as _,b as N,c as a,d as V,e as R,f as A,g as c,h as I,i as T,j as D,k as M,l as q,m as G,n as P}from"./chunk-INXNOXXO.js";import"./chunk-WXWXYMIB.js";import{u as C,v as F,z as k}from"./chunk-RMQVJLYB.js";import{$a as x,Ab as i,Cb as E,Eb as p,Ma as n,Wa as v,X as g,ba as b,ca as h,hb as s,kb as w,nb as r,ob as t,pb as m,sb as S,tb as L,ub as y}from"./chunk-AGOSMD2F.js";function U(l,d){if(l&1&&(r(0,"div",14),i(1),t(),r(2,"div",15)(3,"a",16),i(4," Register "),t()(),r(5,"div",15)(6,"a",17),i(7," Forgot Password "),t()()),l&2){let e=y();n(),E(" ",e.apiError," ")}}var j=class l{loaderService=g(k);sucess=!1;apiError=null;router=g(C);authService=g(P);LoginForm=new A({email:new c("",[a.required,a.maxLength(50),a.email]),password:new c("",[a.required,a.minLength(8)]),RememberME:new c(!1)});getValues(){if(this.loaderService.show(),this.LoginForm.valid){let d={email:this.LoginForm.get("email")?.value,password:this.LoginForm.get("password")?.value};this.authService.login(d).subscribe({next:e=>{if(console.log("wth",e),e.message=="success"){let o=!!this.LoginForm.get("RememberME")?.value;this.LoginForm.reset(),this.sucess=!0,o?localStorage.setItem("UserToken",e.token):sessionStorage.setItem("UserToken",e.token),this.router.navigate(["/products"]).then(()=>{this.loaderService.hide()})}},error:e=>{this.loaderService.hide(),console.error("FAILED",e.error),this.apiError=e.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.LoginForm.errors),this.LoginForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-login"]],decls:23,vars:5,consts:[[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],[1,"flex","items-start","mb-5"],[1,"flex","items-center","h-5"],["type","checkbox","id","remember","formControlName","RememberME",1,"w-4","h-4","border","border-gray-300","rounded-sm","bg-white","focus:ring-2","focus:ring-green-400"],["for","remember",1,"ms-2","text-sm","font-medium","text-gray-900"],["type","submit",1,"disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:hover:bg-slate-800","disabled:focus:ring-0","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"disabled"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/register"],["routerLink","/forgot-password"]],template:function(e,o){if(e&1){let u=S();r(0,"form",0),L("ngSubmit",function(){return b(u),h(o.getValues())}),r(1,"h1",1),i(2,"Sign In"),t(),r(3,"div",2)(4,"label",3),i(5,"Email"),t(),m(6,"input",4),p(7),m(8,"app-errormsg",5),t(),r(9,"div",2)(10,"label",6),i(11,"Password"),t(),m(12,"input",7),p(13),m(14,"app-errormsg",8),t(),r(15,"div",9)(16,"div",10),m(17,"input",11),t(),r(18,"label",12),i(19,"Remember me"),t()(),r(20,"button",13),i(21,"Submit"),t(),x(22,U,8,1),t()}if(e&2){s("formGroup",o.LoginForm);let u=o.LoginForm.controls.email;n(8),s("control",u);let f=o.LoginForm.controls.password;n(6),s("control",f),n(6),s("disabled",o.LoginForm.invalid||o.sucess),n(2),w(o.apiError?22:-1)}},dependencies:[q,I,N,_,V,R,M,T,D,G,F],encapsulation:2})};export{j as LoginComponent};
