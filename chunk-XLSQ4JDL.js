import{a as B}from"./chunk-CRNNH4GY.js";import{a as R}from"./chunk-6VVBVPFE.js";import{a as L,b as V,c as $}from"./chunk-P6KFG34U.js";import{o as j}from"./chunk-VNWZKHP3.js";import{a as A}from"./chunk-KQUAVRFU.js";import{a as F}from"./chunk-C73HAMVH.js";import{k as W}from"./chunk-6WQU6EZD.js";import{j as O,l as T}from"./chunk-ISIAGV3U.js";import{Ab as p,Ib as s,Jb as _,Kb as M,Oa as S,Pb as E,Ra as o,Wa as c,_ as C,ab as b,ea as u,fa as h,fb as w,nb as m,rb as P,sb as I,tb as n,ub as a,vb as k,wb as f,xb as x,yb as y,zb as v}from"./chunk-7YWQNTIB.js";var H=r=>({RedHeart:r}),N=(r,t)=>t._id;function z(r,t){r&1&&(f(0),s(1,"Add"),x())}function G(r,t){r&1&&(f(0),s(1,"Adding..."),x())}function U(r,t){if(r&1){let i=y();n(0,"div",3),v("click",function(){let l=u(i).$implicit,d=p();return h(d.openDetails(l._id))}),n(1,"div",4),k(2,"img",5),a(),n(3,"div",6)(4,"h3",7),s(5),a(),n(6,"h3"),s(7),a(),n(8,"div",8)(9,"h3"),s(10),a(),n(11,"div",9)(12,"h3"),s(13),a(),n(14,"mat-icon",10),s(15,"star"),a()()()(),n(16,"div",11)(17,"div",12)(18,"button",13),v("click",function(l){let d=u(i).$implicit,g=p();return h(g.addToCart(d,l))}),w(19,z,2,0,"ng-container",14)(20,G,2,0,"ng-container",14),a()(),n(21,"button",15),v("click",function(l){let d=u(i).$implicit,g=p();return h(g.toggleWishlist(d._id,l))}),n(22,"mat-icon",16),s(23,"favorite"),a()()()()}if(r&2){let i=t.$implicit,e=p();o(2),m("src",i.imageCover,S)("alt",i.title),o(3),_(i.category.name),o(2),_(i.title),o(3),M("",i.price," EGP"),o(3),_(i.ratingsAverage),o(5),m("disabled",e.loadingCart[i._id]),o(),m("ngIf",!e.loadingCart[i._id]),o(),m("ngIf",e.loadingCart[i._id]),o(2),m("ngClass",E(10,H,e.isInWishlist(i._id)))}}var D=class r{constructor(t,i,e,l,d,g){this.route=t;this.wishlistService=i;this.cartService=e;this.auth=l;this.snackBar=d;this.cartlogic=g}products=[];wishlist=[];cart=[];loadingCart={};load=C(F);ngOnInit(){this.auth.isLoggedIn()&&(this.loadWishlist(),this.cartlogic.getCartFromApi(),this.cartlogic.cart$.subscribe(t=>this.cart=t))}showToast(t,i="check_circle"){this.snackBar.openFromComponent(V,{data:{message:t,icon:i},duration:3e3,horizontalPosition:"right",verticalPosition:"top",panelClass:["custom-snackbar"]})}loadWishlist(){this.wishlistService.getWishlist().subscribe({next:t=>{this.wishlist=t.data.map(i=>i._id)}})}isInWishlist(t){return this.wishlist.includes(t)}toggleWishlist(t,i){if(i.stopPropagation(),!this.auth.isLoggedIn()){this.route.navigate(["/login"]);return}this.isInWishlist(t)?(this.wishlist=this.wishlist.filter(e=>e!==t),this.wishlistService.removeFromWishlist(t).subscribe({error:()=>this.wishlist.push(t)})):(this.wishlist.push(t),this.wishlistService.addToWishlist(t).subscribe({error:()=>this.wishlist=this.wishlist.filter(e=>e!==t)}))}addToCart(t,i){i.stopPropagation(),this.cartlogic.addToCart(t)}openDetails(t){this.route.navigate(["/products-details",t])}static \u0275fac=function(i){return new(i||r)(c(W),c(R),c($),c(A),c(L),c(B))};static \u0275cmp=b({type:r,selectors:[["app-productsgird"]],inputs:{products:"products"},decls:4,vars:0,consts:[[1,"pt-10"],[1,"grid","grid-cols-2","justify-center","align-center","sm:grid-cols-3","md:grid-cols-3","lg:grid-cols-4"],[1,"product","m-3","p-4","gap-2"],[1,"product","m-3","p-4","gap-2",3,"click"],[1,"imgcont","align-center","justify-center","items-center"],[1,"h-1vh","lg:h-auto",3,"src","alt"],[1,"text","m-3"],[1,"text-main","category"],[1,"flex","flex-row","gap-5"],[1,"flex","flex-row","ml-auto","flex-end"],[1,"text-yellow-300","star"],[1,"flex","flex-row"],[1,"btn","mx-auto"],[3,"click","disabled"],[4,"ngIf"],[1,"mr-5",3,"click"],[1,"Heart",3,"ngClass"]],template:function(i,e){i&1&&(n(0,"section",0)(1,"div",1),P(2,U,24,12,"div",2,N),a()()),i&2&&(o(2),I(e.products))},dependencies:[j,O,T],styles:[".product[_ngcontent-%COMP%]{border:0px solid #0aad0a;border-radius:10px;transition:all .2s ease}.product[_ngcontent-%COMP%]:hover{border:2px solid #0aad0a;box-shadow:0 0 2px 2px var(--shadow)}.imgcont[_ngcontent-%COMP%]{max-width:100%;overflow:hidden;display:flex;border-radius:40px}.imgcont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:40px;max-width:100%;max-height:100%;object-fit:contain}.star[_ngcontent-%COMP%]{color:#daa520}.category[_ngcontent-%COMP%]{color:var(--main-color);margin-bottom:10px}.btn[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;background-color:#0aad0a;border-radius:10px;width:50%;padding:10px}.RedHeart[_ngcontent-%COMP%]{color:red}.Heart[_ngcontent-%COMP%]{cursor:pointer}.Heart[_ngcontent-%COMP%]:hover{color:#cb7272}"]})};export{D as a};
