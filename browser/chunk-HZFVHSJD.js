import{a as _,b as t,c as L,d as N,e as P,f as g,g as q,h as V,i as A,j as D,k as T,l as G,m as I}from"./chunk-RE3K3DXC.js";import"./chunk-WXWXYMIB.js";import{u as C,v as k,z as R}from"./chunk-RMQVJLYB.js";import{$a as v,Ab as a,Cb as F,Eb as d,Ma as l,Wa as w,X as u,ba as f,ca as h,hb as m,kb as x,nb as r,ob as e,pb as n,sb as y,tb as S,ub as E}from"./chunk-AGOSMD2F.js";function $(p,s){if(p&1&&(r(0,"div",23),a(1),e(),r(2,"div",24)(3,"a",25),a(4," Login instead "),e()()),p&2){let o=E();l(),F(" ",o.apiError," ")}}var M=class p{loaderService=u(R);sucess=!1;apiError=null;router=u(C);authService=u(I);regForm=new P({name:new g("",[t.required,t.minLength(2),t.maxLength(20)]),email:new g("",[t.required,t.maxLength(50),t.email]),password:new g("",[t.required,t.minLength(8)]),rePassword:new g("",[t.required,t.minLength(8)]),phone:new g("",[t.required,t.pattern(/^01[0125][0-9]{8}$/)])},{validators:this.checkpass});checkpass(s){return s.get("password")?.value==s.get("rePassword")?.value?null:{mismatch:!0}}getValues(){if(this.loaderService.show(),this.regForm.valid){let s={name:this.regForm.get("name")?.value,email:this.regForm.get("email")?.value,password:this.regForm.get("password")?.value,rePassword:this.regForm.get("rePassword")?.value,phone:this.regForm.get("phone")?.value};this.authService.register(s).subscribe({next:o=>{console.log("wth",o),o.message=="success"&&(this.regForm.reset(),this.sucess=!0,this.router.navigate(["/login"]).then(()=>{this.loaderService.hide()}))},error:o=>{console.error("FAILED",o.error),this.apiError=o.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.regForm.errors),this.regForm.markAllAsTouched()}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=w({type:p,selectors:[["app-register"]],decls:41,vars:9,consts:[[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","name","type","text","id","name","placeholder","Type Your name","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","name",3,"control"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","phone","type","phone","id","phone","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","phone",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","rePassword","type","password","id","Re_Password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","rePassword",3,"control","compare"],[1,"flex","items-start","mb-5"],[1,"flex","items-center","h-5"],["id","remember","type","checkbox","value","",1,"w-4","h-4","border","border-gray-300","rounded-sm","bg-white","focus:ring-2","focus:ring-green-400"],["for","remember",1,"ms-2","text-sm","font-medium","text-gray-900"],["type","submit",1,"disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:hover:bg-slate-800","disabled:focus:ring-0","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"disabled"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/login"]],template:function(o,i){if(o&1){let c=y();r(0,"form",0),S("ngSubmit",function(){return f(c),h(i.getValues())}),r(1,"h1",1),a(2,"Register"),e(),r(3,"div",2)(4,"label",3),a(5,"Name"),e(),n(6,"input",4),d(7),n(8,"app-errormsg",5),e(),r(9,"div",2)(10,"label",6),a(11,"Email"),e(),n(12,"input",7),d(13),n(14,"app-errormsg",8),e(),r(15,"div",2)(16,"label",9),a(17,"phone"),e(),n(18,"input",10),d(19),n(20,"app-errormsg",11),e(),r(21,"div",2)(22,"label",12),a(23,"Password"),e(),n(24,"input",13),d(25),n(26,"app-errormsg",14),e(),r(27,"div",2)(28,"label",15),a(29,"Re-Password"),e(),n(30,"input",16),d(31),n(32,"app-errormsg",17),e(),r(33,"div",18)(34,"div",19),n(35,"input",20),e(),r(36,"label",21),a(37,"Remember me"),e()(),r(38,"button",22),a(39,"Submit"),e(),v(40,$,5,1),e()}if(o&2){m("formGroup",i.regForm),i.regForm.controls.name,l(8),m("control",i.regForm.controls.name);let c=i.regForm.controls.email;l(6),m("control",c);let b=i.regForm.controls.phone;l(6),m("control",b);let j=i.regForm.controls.password;l(6),m("control",j);let Y=i.regForm.controls.rePassword;l(6),m("control",Y)("compare",i.regForm),l(6),m("disabled",i.regForm.invalid||i.sucess),l(2),x(i.apiError?40:-1)}},dependencies:[T,q,_,L,N,D,V,A,G,k],encapsulation:2})};export{M as RegisterComponent};
