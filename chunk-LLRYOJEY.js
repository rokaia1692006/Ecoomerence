import{b as R,c as r,d as N,e as P,f as q,g,h as V,i as A,j as D,k as T,m as G,n as I}from"./chunk-O3DDNPJU.js";import{a as L}from"./chunk-KQUAVRFU.js";import"./chunk-WXWXYMIB.js";import{a as k}from"./chunk-C73HAMVH.js";import{k as C,l as _}from"./chunk-6WQU6EZD.js";import"./chunk-ISIAGV3U.js";import{Ab as S,Ib as l,Kb as E,Nb as d,Ra as a,_ as c,ab as w,ea as f,fa as h,fb as v,nb as s,qb as x,tb as i,ub as e,vb as n,yb as y,zb as F}from"./chunk-7YWQNTIB.js";function $(p,m){if(p&1&&(i(0,"div",20),l(1),e(),i(2,"div",21)(3,"a",22),l(4," Login instead "),e()()),p&2){let t=S();a(),E(" ",t.apiError," ")}}var M=class p{loaderService=c(k);sucess=!1;apiError=null;router=c(C);authService=c(L);regForm=new q({name:new g("",[r.required,r.minLength(2),r.maxLength(20)]),email:new g("",[r.required,r.maxLength(50),r.email]),password:new g("",[r.required,r.minLength(8)]),rePassword:new g("",[r.required,r.minLength(8)]),phone:new g("",[r.required,r.pattern(/^01[0125][0-9]{8}$/)])},{validators:this.checkpass});checkpass(m){return m.get("password")?.value==m.get("rePassword")?.value?null:{mismatch:!0}}getValues(){if(this.loaderService.show(),this.regForm.valid){let m={name:this.regForm.get("name")?.value,email:this.regForm.get("email")?.value,password:this.regForm.get("password")?.value,rePassword:this.regForm.get("rePassword")?.value,phone:this.regForm.get("phone")?.value};this.authService.register(m).subscribe({next:t=>{console.log("wth",t),t.message=="success"&&(this.regForm.reset(),this.sucess=!0,this.router.navigate(["/login"]).then(()=>{this.loaderService.hide()}))},error:t=>{console.error("FAILED",t.error),this.apiError=t.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.regForm.errors),this.regForm.markAllAsTouched()}static \u0275fac=function(t){return new(t||p)};static \u0275cmp=w({type:p,selectors:[["app-register"]],decls:37,vars:9,consts:[[1,"pt-10"],[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","name","type","text","id","name","placeholder","Type Your name","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","name",3,"control"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","phone","type","phone","id","phone","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","phone",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","rePassword","type","password","id","Re_Password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","rePassword",3,"control","compare"],["type","submit",1,"disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:hover:bg-slate-800","disabled:focus:ring-0","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"disabled"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/login"]],template:function(t,o){if(t&1){let u=y();i(0,"section",0)(1,"form",1),F("ngSubmit",function(){return f(u),h(o.getValues())}),i(2,"h1",2),l(3,"Register"),e(),i(4,"div",3)(5,"label",4),l(6,"Name"),e(),n(7,"input",5),d(8),n(9,"app-errormsg",6),e(),i(10,"div",3)(11,"label",7),l(12,"Email"),e(),n(13,"input",8),d(14),n(15,"app-errormsg",9),e(),i(16,"div",3)(17,"label",10),l(18,"phone"),e(),n(19,"input",11),d(20),n(21,"app-errormsg",12),e(),i(22,"div",3)(23,"label",13),l(24,"Password"),e(),n(25,"input",14),d(26),n(27,"app-errormsg",15),e(),i(28,"div",3)(29,"label",16),l(30,"Re-Password"),e(),n(31,"input",17),d(32),n(33,"app-errormsg",18),e(),i(34,"button",19),l(35,"Submit"),e(),v(36,$,5,1),e()()}if(t&2){a(),s("formGroup",o.regForm),o.regForm.controls.name,a(8),s("control",o.regForm.controls.name);let u=o.regForm.controls.email;a(6),s("control",u);let b=o.regForm.controls.phone;a(6),s("control",b);let j=o.regForm.controls.password;a(6),s("control",j);let Y=o.regForm.controls.rePassword;a(6),s("control",Y)("compare",o.regForm),a(),s("disabled",o.regForm.invalid||o.sucess),a(2),x(o.apiError?36:-1)}},dependencies:[G,V,R,N,P,T,A,D,I,_],encapsulation:2})};export{M as RegisterComponent};
