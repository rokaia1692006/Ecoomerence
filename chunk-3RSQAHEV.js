import{b as S,c as t,d as C,e as N,h as w,i as k,j as I,l as D,m as _,n as j}from"./chunk-O3DDNPJU.js";import{a as F}from"./chunk-KQUAVRFU.js";import{a as y}from"./chunk-WXWXYMIB.js";import{k as A}from"./chunk-6WQU6EZD.js";import{u as h,v as b}from"./chunk-ISIAGV3U.js";import{Ib as u,Ra as i,U as f,Wa as d,Z as p,ab as v,nb as s,tb as a,ub as l,vb as g,zb as c}from"./chunk-7YWQNTIB.js";var m=class n{constructor(e,r){this.http=e;this.auth=r}URL=y.apiUrl+"addresses";ensureToken(){let e=this.auth.getToken();if(!e)throw new Error("No token found");return new h().set("token",e)}addAddress(e){let r=this.ensureToken();return this.http.post(this.URL,{Address:e},{headers:r})}static \u0275fac=function(r){return new(r||n)(p(b),p(F))};static \u0275prov=f({token:n,factory:n.\u0275fac,providedIn:"root"})};var U=class n{constructor(e,r,o){this.addressService=e;this.fb=r;this.router=o}addresses=[];addressForm;ngOnInit(){this.addressForm=this.fb.group({name:["",[t.required,t.minLength(3),t.pattern(/^[A-Za-z\s]+$/)]],details:["",[t.required,t.minLength(5)]],phone:["",[t.required,t.pattern(/^01[0-2,5]{1}[0-9]{8}$/)]],city:["",[t.required,t.minLength(2),t.pattern(/^[A-Za-z\s]+$/)]]})}addAddress(){this.addressForm.invalid||this.addressService.addAddress(this.addressForm.value).subscribe({next:e=>{console.log("add",e),this.addressForm.reset();let r=this.addressForm.value;sessionStorage.setItem("shippingAddress",JSON.stringify(r))},error:e=>console.log(e)})}checkout(){this.router.navigate(["/order_placed"])}static \u0275fac=function(r){return new(r||n)(d(m),d(D),d(A))};static \u0275cmp=v({type:n,selectors:[["app-add-user-data"]],decls:16,vars:6,consts:[[1,"pt-10"],[1,"flex","justify-center","items-center","min-h-screen","mt-3"],[1,"p-4","max-w-md","w-full","shadow-lg","shadow-cyan-200"],[1,"text-xl","font-bold","mb-4"],[1,"flex","flex-col","gap-3","w-full",3,"ngSubmit","formGroup"],["formControlName","name","placeholder","Name",1,"border","rounded-sm","border-green-400","p-2"],["label","name",3,"control"],["formControlName","details","placeholder","Details",1,"border","rounded-sm","border-green-400","p-2"],["label","details",3,"control"],["formControlName","phone","placeholder","Phone",1,"border","p-2","rounded-sm","border-green-400"],["label","phone",3,"control"],["formControlName","city","placeholder","City",1,"border","p-2","rounded-sm","border-green-400"],["label","city",3,"control"],["type","submit",1,"bg-green-500","text-white","px-3","py-2","disabled:bg-gray-600","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(r,o){r&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),u(4," Add Address "),l(),a(5,"form",4),c("ngSubmit",function(){return o.addAddress()}),g(6,"input",5)(7,"app-errormsg",6)(8,"input",7)(9,"app-errormsg",8)(10,"input",9)(11,"app-errormsg",10)(12,"input",11)(13,"app-errormsg",12),a(14,"button",13),c("click",function(){return o.checkout()}),u(15," Add Address "),l()()()()()),r&2&&(i(5),s("formGroup",o.addressForm),i(2),s("control",o.addressForm.get("name")),i(2),s("control",o.addressForm.get("details")),i(2),s("control",o.addressForm.get("phone")),i(2),s("control",o.addressForm.get("city")),i(),s("disabled",o.addressForm.invalid))},dependencies:[_,w,S,C,N,k,I,j],encapsulation:2})};export{U as AddUserDataComponent};
