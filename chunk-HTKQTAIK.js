import{a as N,b as a,c as V,d as k,e as A,f as c,g as R,h as D,i as q,j as G,k as I,l as T,m as P}from"./chunk-RE3K3DXC.js";import"./chunk-WXWXYMIB.js";import{u as C,v as F,z as _}from"./chunk-RMQVJLYB.js";import{$a as x,Ab as o,Cb as E,Eb as p,Ma as n,Wa as v,X as g,ba as b,ca as h,hb as s,kb as w,nb as r,ob as e,pb as m,sb as S,tb as L,ub as y}from"./chunk-AGOSMD2F.js";function j(l,d){if(l&1&&(r(0,"div",14),o(1),e(),r(2,"div",15)(3,"a",16),o(4," Register "),e()(),r(5,"div",15)(6,"a",17),o(7," Forgot Password "),e()()),l&2){let t=y();n(),E(" ",t.apiError," ")}}var M=class l{loaderService=g(_);sucess=!1;apiError=null;router=g(C);authService=g(P);LoginForm=new A({email:new c("",[a.required,a.maxLength(50),a.email]),password:new c("",[a.required,a.minLength(8)])});getValues(){if(this.loaderService.show(),this.LoginForm.valid){let d={email:this.LoginForm.get("email")?.value,password:this.LoginForm.get("password")?.value};this.authService.login(d).subscribe({next:t=>{console.log("wth",t),t.message=="success"&&(this.LoginForm.reset(),this.sucess=!0,this.router.navigate(["/products"]).then(()=>{this.loaderService.hide()}))},error:t=>{this.loaderService.hide(),console.error("FAILED",t.error),this.apiError=t.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.LoginForm.errors),this.LoginForm.markAllAsTouched()}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=v({type:l,selectors:[["app-login"]],decls:23,vars:5,consts:[[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],[1,"flex","items-start","mb-5"],[1,"flex","items-center","h-5"],["id","remember","type","checkbox","value","",1,"w-4","h-4","border","border-gray-300","rounded-sm","bg-white","focus:ring-2","focus:ring-green-400"],["for","remember",1,"ms-2","text-sm","font-medium","text-gray-900"],["type","submit",1,"disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:hover:bg-slate-800","disabled:focus:ring-0","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"disabled"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/register"],["routerLink","/forgot-password"]],template:function(t,i){if(t&1){let u=S();r(0,"form",0),L("ngSubmit",function(){return b(u),h(i.getValues())}),r(1,"h1",1),o(2,"Sign In"),e(),r(3,"div",2)(4,"label",3),o(5,"Email"),e(),m(6,"input",4),p(7),m(8,"app-errormsg",5),e(),r(9,"div",2)(10,"label",6),o(11,"Password"),e(),m(12,"input",7),p(13),m(14,"app-errormsg",8),e(),r(15,"div",9)(16,"div",10),m(17,"input",11),e(),r(18,"label",12),o(19,"Remember me"),e()(),r(20,"button",13),o(21,"Submit"),e(),x(22,j,8,1),e()}if(t&2){s("formGroup",i.LoginForm);let u=i.LoginForm.controls.email;n(8),s("control",u);let f=i.LoginForm.controls.password;n(6),s("control",f),n(6),s("disabled",i.LoginForm.invalid||i.sucess),n(2),w(i.apiError?22:-1)}},dependencies:[I,R,N,V,k,G,D,q,T,F],encapsulation:2})};export{M as LoginComponent};
