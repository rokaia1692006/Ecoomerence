import{a as N,b as V,c as a,d as R,e as A,f as D,g,h as M,i as T,j as q,k as G,m as I,n as P}from"./chunk-O3DDNPJU.js";import{a as _}from"./chunk-KQUAVRFU.js";import"./chunk-WXWXYMIB.js";import{a as k}from"./chunk-C73HAMVH.js";import{k as C,l as F}from"./chunk-6WQU6EZD.js";import"./chunk-ISIAGV3U.js";import{Ab as y,Ib as i,Kb as E,Nb as p,Ra as n,_ as c,ab as v,ea as f,fa as h,fb as x,nb as s,qb as w,tb as r,ub as t,vb as m,yb as S,zb as L}from"./chunk-7YWQNTIB.js";function z(l,d){if(l&1&&(r(0,"div",17),i(1),t(),r(2,"div",15)(3,"a",18),i(4," Forgot Password "),t()()),l&2){let e=y();n(),E(" ",e.apiError," ")}}var j=class l{loaderService=c(k);sucess=!1;apiError=null;router=c(C);authService=c(_);LoginForm=new D({email:new g("",[a.required,a.maxLength(50),a.email]),password:new g("",[a.required,a.minLength(8)]),RememberME:new g(!1)});getValues(){if(this.loaderService.show(),this.LoginForm.valid){let d={email:this.LoginForm.get("email")?.value,password:this.LoginForm.get("password")?.value};this.authService.login(d).subscribe({next:e=>{if(console.log("wth",e),e.message=="success"){let o=!!this.LoginForm.get("RememberME")?.value;this.LoginForm.reset(),this.sucess=!0,this.authService.setToken(e.token,o),this.router.navigate(["/products"]).then(()=>{this.loaderService.hide()})}},error:e=>{this.loaderService.hide(),console.error("FAILED",e.error),this.apiError=e.error?.message||"Try Again"}})}else this.loaderService.hide(),console.log(this.LoginForm.errors),this.LoginForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-login"]],decls:27,vars:5,consts:[[1,"pt-10"],[1,"max-w-sm","mx-auto","p-6","rounded-lg","shadow-lg","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","formGroup"],[1,"mb-5","text-center","font-bold","text-2xl"],[1,"mb-5"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","email","type","email","id","email","placeholder","Email","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Email",3,"control"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","password","type","password","id","password","required","",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5"],["label","Password",3,"control"],[1,"flex","items-start","mb-5"],[1,"flex","items-center","h-5"],["type","checkbox","id","remember","formControlName","RememberME",1,"w-4","h-4","border","border-gray-300","rounded-sm","bg-white","focus:ring-2","focus:ring-green-400"],["for","remember",1,"ms-2","text-sm","font-medium","text-gray-900"],["type","submit",1,"w-full","px-5","py-2.5","text-sm","text-center","font-medium","rounded-lg","text-white","bg-green-600","hover:bg-green-700","focus:ring-2","disabled:bg-gray-400","disabled:text-white","disabled:opacity-70","disabled:cursor-not-allowed",3,"disabled"],[1,"justify-center","text-center","text-white","font-extrabold","rounded-md","p-2","m-5","bg-green-700","hover:bg-green-600"],["routerLink","/register"],[1,"text-red-600","font-mono","font-medium","mt-3","mb-3","text-center"],["routerLink","/forgot-password"]],template:function(e,o){if(e&1){let u=S();r(0,"section",0)(1,"form",1),L("ngSubmit",function(){return f(u),h(o.getValues())}),r(2,"h1",2),i(3,"Sign In"),t(),r(4,"div",3)(5,"label",4),i(6,"Email"),t(),m(7,"input",5),p(8),m(9,"app-errormsg",6),t(),r(10,"div",3)(11,"label",7),i(12,"Password"),t(),m(13,"input",8),p(14),m(15,"app-errormsg",9),t(),r(16,"div",10)(17,"div",11),m(18,"input",12),t(),r(19,"label",13),i(20,"Remember me"),t()(),r(21,"button",14),i(22,` Submit
`),t(),r(23,"div",15)(24,"a",16),i(25," Register "),t()(),x(26,z,5,1),t()()}if(e&2){n(),s("formGroup",o.LoginForm);let u=o.LoginForm.controls.email;n(8),s("control",u);let b=o.LoginForm.controls.password;n(6),s("control",b),n(6),s("disabled",o.LoginForm.invalid||o.sucess),n(5),w(o.apiError?26:-1)}},dependencies:[I,M,V,N,R,A,G,T,q,P,F],encapsulation:2})};export{j as LoginComponent};
